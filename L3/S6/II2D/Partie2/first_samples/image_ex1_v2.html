<html>
  <body>
    <img id="input" src="../data/tambour.png" width="240" height="320"/>
    <script type="text/javascript">

      //BLOC1
      //On récupére l'image.
      var imgElt = document.getElementById("input");

      imgElt.onload=function(){

        //BLOC2
        //On crée un canvas de la taille de l'image.
        var canvas = document.createElement("canvas");
        canvas.width = imgElt.width; canvas.height = imgElt.height;

        //BLOC3
        //On récupére le contexte du canvas et on affiche l'image sur le canvas.
        var ctx2d = canvas.getContext("2d");
        ctx2d.drawImage(imgElt, 0, 0, canvas.width, canvas.height);


        //BLOC4
        //On récupére l'image et on sotck les données de l'image.
        var imgData = ctx2d.getImageData(0, 0, canvas.width, canvas.height);
        var pixels = imgData.data;

        //BLOC5
        //On récupére le pixel en x = 50 et y = 50.
        //On récupére les données du pixel.
        //On affiche les données en alerte.
        var x = 50; var y = 50;
        var pos_pixel_dans_vector = (y * imgData.width + x)<<2;
        var r = pixels[pos_pixel_dans_vector + 0];
        var g = pixels[pos_pixel_dans_vector + 1];
        var b = pixels[pos_pixel_dans_vector + 2];
        var a = pixels[pos_pixel_dans_vector + 3];

        alert("Pixel at ("+x+", "+y+") : ("+r+", "+g+", "+b+", "+a+")");
      }

      </script>
    </body>
  </html>
